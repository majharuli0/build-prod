import{r as l,j as t,ga as b,B as m,gb as f,aC as h,gc as j,T as u,N as S,a7 as g}from"./index-Br78m9MR.js";import{c as y,b as N}from"./subscriptions-D27Ne-Hx.js";import{C as D,S as C}from"./SubDetails-BFf4OroA.js";import{a as _,R as p}from"./SyncOutlined-CVNzsWbD.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="123a8d53-3e34-4a78-9933-b5dcc8ddead3",e._sentryDebugIdIdentifier="sentry-dbid-123a8d53-3e34-4a78-9933-b5dcc8ddead3")}catch{}function v({data:e={}}){const[n,s]=l.useState(!1),r=i=>{i.key==="1"&&s(!0)},d=[{label:"Cancel Subscription",key:"1",danger:!0}];function o(i){y({subscriptionId:e==null?void 0:e.sub_id,cancellationReason:i}).then(c=>{console.log(c)}).catch(c=>{console.log(c)})}return t.jsxs("div",{children:[t.jsx(b,{menu:{items:d,onClick:r},trigger:["click"],placement:"bottomRight",children:t.jsx(m,{onClick:i=>i.preventDefault(),shape:"circle",icon:t.jsx(f,{})})}),t.jsx(D,{modalOpen:n,setModalOpen:s,onCancelSubscription:o})]})}const A=[{title:"Subscription Created At",render:e=>t.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:h(e==null?void 0:e.created_at)||"N/A"})},{title:"User ",render:e=>{var n,s;return t.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:((s=(n=e==null?void 0:e.StripeEventData)==null?void 0:n.metadata)==null?void 0:s.user_email)||"N/A"})}},{title:"Subscription ID",render:e=>{var n;return t.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:((n=e==null?void 0:e.StripeEventData)==null?void 0:n.id)||"N/A"})}},{title:"Product ID",render:e=>{var n,s;return t.jsx("button",{children:t.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:((s=(n=e==null?void 0:e.StripeEventData)==null?void 0:n.plan)==null?void 0:s.product)||"N/A"})})}},{title:"Amount",render:e=>t.jsx("button",{children:t.jsxs("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap uppercase",children:["$",(e==null?void 0:e.real_amount_decimal)/100||0," ",(e==null?void 0:e.currency)||"USD"]})})},{title:"Subscription Expire Date",render:e=>{var n;return t.jsx("button",{children:t.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary text-nowrap",children:j((n=e==null?void 0:e.StripeEventData)==null?void 0:n.current_period_end)||"N/A"})})}},{title:"Subscription Status",render:e=>t.jsx("button",{children:t.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary",children:[(e==null?void 0:e.SubscriptionStatus)==="cancelled"&&t.jsx(u,{icon:t.jsx(_,{}),className:"font-semibold",children:"Canceled"}),(e==null?void 0:e.SubscriptionStatus)==="active"&&t.jsx(u,{icon:t.jsx(p,{spin:!0}),color:"success",className:"font-semibold",children:"Active"}),(e==null?void 0:e.SubscriptionStatus)==="trialing"&&t.jsx(u,{icon:t.jsx(p,{spin:!0}),color:"warning",className:"font-semibold",children:"Trialing"})]})})},{title:"Details",render:e=>t.jsx("button",{children:t.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary flex items-center gap-1",children:t.jsx(C,{data:e})})})},{title:"Action",render:e=>t.jsx("button",{children:t.jsx(v,{data:e})})}];function T(){const[e,n]=l.useState(!0),[s,r]=l.useState({}),[d,o]=l.useState(0),[i,c]=l.useState([]),x=l.useCallback(()=>{n(!0),N(s).then(a=>{c(a==null?void 0:a.data),o(a==null?void 0:a.total)}).then(a=>{console.error("Error fetching subscriptions:",a)}).finally(()=>{n(!1)})},[s]);return l.useEffect(()=>{x()},[x]),t.jsx(t.Fragment,{children:t.jsxs("div",{id:"refunds_request",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6",children:[t.jsx("div",{id:"Recently_Closed_Alerts_Header",className:"w-full flex justify-between",children:t.jsx("h2",{className:" text-2xl font-bold text-text-primary",children:"All Subscribed User"})}),t.jsx(S.Provider,{value:{total:d,page:s,SetPage:r,getList:x},children:t.jsx(g,{loading:e,columns:A,tableData:i,showPagination:!1})})]})})}export{T as default};
//# sourceMappingURL=index-CmEAHwS4.js.map
