import{r as l,bq as j,br as b,j as e,t as g,bs as f,bu as v,bt as w,bx as y,by as N}from"./index-DCufaEoq.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new t.Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="603f9753-c3aa-4e64-83bb-60d56ee8e491",t._sentryDebugIdIdentifier="sentry-dbid-603f9753-c3aa-4e64-83bb-60d56ee8e491")}catch{}function p({data:t={}}){const{deviceData:r}=l.useContext(j),o=l.useContext(b),{elderlyDetails:n}=o||{},d=(t==null?void 0:t.device_no)||(n==null?void 0:n.deviceId),[c,m]=l.useState([]);l.useEffect(()=>{var i;const s=((i=r[d])==null?void 0:i.position)||[];m(s)},[r,d]);const u=l.useMemo(()=>{const s=r[d],i=s==null?void 0:s.hbstaticsTimestamp,a=Date.now();return!(s!=null&&s.hbstatics)||!i||(a-i)/1e3>90?null:s.hbstatics},[r[d]]);return e.jsxs("div",{className:"flex gap-2 h-fit",children:[e.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[(c==null?void 0:c.length)>0?e.jsx(g,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:c==null?void 0:c.map((s,i)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{style:{backgroundColor:s==null?void 0:s.color},className:"p-2 rounded-full",children:e.jsx(f,{size:14,color:"white"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm m-0",children:s==null?void 0:s.posture})})]},i)),children:e.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:c==null?void 0:c.map((s,i)=>e.jsx("div",{style:{backgroundColor:s==null?void 0:s.color},className:"p-1 rounded-full border-2 border-white",children:e.jsx(f,{size:16,color:"white"})},i))})}):e.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:e.jsx(f,{size:16,color:"white"})}),e.jsx("span",{className:"font-bold text-lg",children:c?c==null?void 0:c.length:0})]}),(t==null?void 0:t.room_type)==2&&u&&e.jsx("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit px-2 py-1",children:(()=>{var i,a,x,h;const s=v(u);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pr-1",children:e.jsx(w,{size:20,color:((a=(i=s==null?void 0:s.statusEvents)==null?void 0:i.sleepState)==null?void 0:a.color)||"gray"})}),e.jsx("span",{className:"font-semibold text-wrap",children:((h=(x=s==null?void 0:s.statusEvents)==null?void 0:x.sleepState)==null?void 0:h.label)||"--"})]})})()})]})}function I(){var o;const t=l.useContext(b),{elderlyDetails:r}=t||{};return e.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(r==null?void 0:r.rooms)&&((o=r==null?void 0:r.rooms)==null?void 0:o.filter(n=>n.device_no).map((n,d)=>e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[e.jsx("h1",{className:"text-2xl font-bold",children:n==null?void 0:n.name}),e.jsxs("div",{className:"flex h-full",children:[e.jsx(p,{data:n}),e.jsxs("div",{id:"roomMap",className:"w-fit h-full mt-14 mx-auto",children:[(n==null?void 0:n.mount_type)===2&&e.jsx(y,{roomInfo:n}),(n==null?void 0:n.mount_type)===1&&e.jsx(N,{roomInfo:n})]})]})]},d)))})}export{I as default};
//# sourceMappingURL=LiveMapTab-D-uKNc9F.js.map
